# RocksDB-Prefix_Extractor

---

## TODO

RocksDB 引入了 prefix_extractor ，它可以很好的解决这个难题。
prefix bloom filter。

这个「前缀布隆过滤器」 Add 进来的 Key 不再是原来的 Key，而是 Key 的固定长度的前缀，它带来的好处之一
是布隆过滤器占用的空间变小了，坏处是误判率也会跟着提高了一点。假设前缀长度是 3，那么把 abcd 这个 Key 
加进去后会认为 abce 也在里面，因为它们共享了 abc 这个前缀。这省下来的空间可以用来存储一个附加的数据结
构 —— Key 前缀 的有序集合，它里面容纳了所有的 Key 前缀的值。通过这个有序的 Key 前缀集合可以快速判断
出目标范围是否存在于当前的 SST 文件中。

和布隆过滤器的数据一样，这个 Key 前缀的有序集合也是缓存（固定）在内存中的。因为单个  SST 文件的 Key 
数量是有限的，前缀设置的比较短的话，对应的的前缀数量也会非常少，消耗的内存就可以忽略不计了。

要是用户的索引字段值上自带了前缀字符串，那切割出来的前缀有可能完全一样，这前缀布隆过滤器岂不是要形同虚设么？
