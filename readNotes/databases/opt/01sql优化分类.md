# 查询优化技术-六个方面

### 查询重用

- 查询结果的重用

- 查询计划的重用

### 查询重写规则

- 是查询语句的一种等价转化

- 关系代数

- 分类

    - 语法级：查询语言层的优化，基于语法进行优化
    - 代数级：查询使用形式逻辑进行优化，运用关系代数原理进行优化
    - 语义级：根据完整性约束，对查询语句进行语义理解
    - 物理级：物理优化技术，基于代价估算模型。比较出各种执行方式中代价最小的。
    
- 查询重写技术优化思路：
    
    - 讲过程性查询转化为描述性的查询，如视图重写
    - 将复杂的查询（如嵌套查询）尽可能转化为多表连接查询
    - 将效率低的谓词转化为等价的效率高的谓词（等价谓词重写）
    - 利用等式和不等式的性质，简化where、having、on条件
    
- 核心是等价转换

### 查询算法优化

- 具体下分为：

    - 单表节点：是否使用索引，从物理存储到内存解析成逻辑字段的过程
    - 两表节点：考虑两表一何种方式连接
    - 多表中间结点：具有不同的连接次序，寻找代价最小的排序
    
- 查询优化的目的就是生成最好的查询计划

    - 基于规则的优化：关系代数、等价转换
    - 基于代价的优化：计算每条的花费
    
- 最广泛的算法：

    - system-R算法：近乎穷举的搜索算法
    - 启发式搜索算法
    - 贪婪算法
    - 动态规划算法
    - 遗传算法
    
- 查询的基本操作是选择、投影、连接
    
    - 前两者包括两表连接的优化规则适用于SPJ（select-project-join）
    - 多表不适用于SPJ
    
### 并行查询优化技术

- 将一个查询分解为一些可以并行运行的子工作，寻找最小响应时间的查询执行计划

### 分布式查询优化

- 分布式查询优化以减少传输的次数和数据量为查询优化目标



